@page "{currentPage:int?}/{searchTerm?}"
@model Overview
@{
    ViewData["Title"] = "Overview";
}

@if(!string.IsNullOrEmpty(Model.SearchTerm))
{
    <p class="search-info">Search results for '@Model.SearchTerm'</p>
}

@for(var i = 0; i < Model.ProjectList.Count; i += 4)
{
    <div class="flex-row">
        @for(var j = 0; j < 4 && i + j < Model.ProjectList.Count; j++)
        {
            var project = Model.ProjectList[i + j];
            <div class="flex-cell">
                <partial name="_Project" model="project" />
            </div>
        }
    </div>
}

@if(Model.TotalPages > 1)
{
    <div class="pagination-wrapper">
        <div class="pagination">
            @if(Model.CurrentPage > 1)
            {
                <a asp-page="/Overview" asp-route-currentPage="@(Model.CurrentPage-1)" class="page-link">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
            }    
            @for(var i = 1; i <= Model.TotalPages; i++)
            {
                <a asp-page="/Overview" asp-route-currentPage="@i" class="page-link @(i == Model.CurrentPage ? "active" : "")">@i</a>
            }
            @if(Model.CurrentPage < Model.TotalPages)
            {
                <a asp-page="/Overview" asp-route-currentPage="@(Model.CurrentPage+1)" class="page-link">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            }  
        </div>
    </div>
}